/*!  2020-02-26 */

jQuery.expr[":"].parents=function(e,t,n){return jQuery(e).parents(n[3]).length<1},function(s,c){var d=null,t=null,n=null,u=null,a=null,h=null,p=null,f=null,v=null,l=null,g=null,m=null,b=null,r=null,y=null,i=null,o=[],S=[],T=null,E=null,D=null,k=null,C=null,w=null,P=null,x=null,L=null,I=null,N=null;function M(e,t){var n=[],a=c(P).val(),l=c(w).val();switch(1==t&&(a=c(x).val()),e){case"presentationTitles":n={tableData:{tableName:e,title:a,index:l},type:t};break;case"presentationLocations":n={tableData:{tableName:e,locationName:a,index:l},type:t};break;case"Presenters":n={tableData:{tableName:e,Name:a,index:l},type:t}}return n}function V(){switch(c("#editSelectsToolSelectTable :selected").val()){case"title":return"presentationTitles";case"presenterName":return"Presenters";case"location":return"presentationLocations"}}function A(){var e=c(w).val(),t=c(C).val(),n=0;"presenterName"!==t?("title"===t?n=1:"location"===t&&(n=2),!function(e,t){var n=[39,22,47,4,36,5,18,33],a=[16,3,15,10,13];switch(t){case 1:for(var l=0;l<n.length;l++)if(n[l]===parseInt(e))return!0;break;case 2:for(l=0;l<a.length;l++)if(a[l]===parseInt(e))return!0}return!1}(e,n)?(t=c("#editSelectsToolSelectTableValue :selected").text(),c(L).removeAttr("disabled"),c(I).removeAttr("disabled"),c(P).val(t)):(c(P).val("Due to schedule generation, this value can not be edited."),c(L).attr("disabled","disabled"),c(I).attr("disabled","disabled"))):(t=c("#editSelectsToolSelectTableValue :selected").text(),c(L).removeAttr("disabled"),c(I).removeAttr("disabled"),c(P).val(t))}function O(t){var n,e;l=c("span").filter(function(){return"1"===c(this).text()}),l=c(l).parent().attr("data-date"),g=l.substring(0,4),m=l.substring(5,7),n=function(e){return t(e)},e={month:m,year:g},e=JSON.stringify(e),void c.ajax({method:"POST",url:"../_serverSide/readMonthlySchedule.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return n(e)})}function j(t){var n,e;n=function(e){return t(e)},e={t:"t"},e=JSON.stringify(e),void c.ajax({method:"POST",url:"../_serverSide/readPresentationTables.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return n(e)})}function B(e,t){if(""===e&&""===t)return!1;var n=new Date(e+" 12:00:00"),a=new Date(t+" 12:00:00");return n=n.getTime(),a=a.getTime(),parseInt(a)>parseInt(n)}function F(n){j(function(e){var t=c('div [class^="presentationEntry"]');H(t,e,function(){!function(e,t){for(var n=0;n<e.length;n++){var a=".submitEventLineButton"+n;c(e[n]).children(".startTimeSelect").val(t[n].StartTime).attr("disabled","disabled"),c(e[n]).children(".endTimeSelect").val(t[n].EndTime).attr("disabled","disabled"),c(e[n]).children(".titleSelect").val(t[n].Title).attr("disabled","disabled"),c(e[n]).children(".locationSelect").val(t[n].Location).attr("disabled","disabled"),c(e[n]).children(".deploymentLocationSelect").val(t[n].ScreenLocation).attr("disabled","disabled"),c(e[n]).children(".presenterSelect").val(t[n].PresenterName).attr("disabled","disabled"),c(e[n]).children(a).attr("disabled","disabled").attr("Index",t[n].Index),c(e[n]).addClass("scheduled")}}(t,n)})})}function G(){j(function(e){var t=c('div [class^="presentationEntry"]');H(t,e,function(){!function(e){for(var t=0;t<e.length;t++)switch(t){case 0:c(e[t]).children(".startTimeSelect").val("09:30"),c(e[t]).children(".endTimeSelect").val("10:00"),c(e[t]).children(".titleSelect").val("Storytime Under the Stars"),c(e[t]).children(".locationSelect").val("Why the Sky?, Upper Level");break;case 1:c(e[t]).children(".startTimeSelect").val("10:30"),c(e[t]).children(".endTimeSelect").val("11:00"),c(e[t]).children(".titleSelect").val("Meet Stuffee"),c(e[t]).children(".locationSelect").val("John Deere Adventure Theater, Main Level");break;case 2:c(e[t]).children(".startTimeSelect").val("12:00"),c(e[t]).children(".endTimeSelect").val("13:00"),c(e[t]).children(".titleSelect").val("WHO-HD Live Weather Forecast"),c(e[t]).children(".locationSelect").val("What on Earth?, Upper Level");break;case 3:c(e[t]).children(".startTimeSelect").val("13:30"),c(e[t]).children(".endTimeSelect").val("14:00"),c(e[t]).children(".titleSelect").val("Cold Blooded Critters"),c(e[t]).children(".locationSelect").val("What on Earth?, Upper Level");break;case 4:c(e[t]).children(".startTimeSelect").val("14:00"),c(e[t]).children(".endTimeSelect").val("14:30"),c(e[t]).children(".titleSelect").val("Snapping Turtle Feeding"),c(e[t]).children(".locationSelect").val("What on Earth?, Upper Level");break;case 5:c(e[t]).children(".startTimeSelect").val("14:30"),c(e[t]).children(".endTimeSelect").val("15:00"),c(e[t]).children(".titleSelect").val("Dawn of the Space Age"),c(e[t]).children(".locationSelect").val("Star Theater, Why the Sky?, Upper Level");break;case 6:c(e[t]).children(".startTimeSelect").val("15:30"),c(e[t]).children(".endTimeSelect").val("16:00"),c(e[t]).children(".titleSelect").val("Iowa Skies Tonight"),c(e[t]).children(".locationSelect").val("Star Theater, Why the Sky?, Upper Level");break;case 7:c(e[t]).children(".startTimeSelect").val("17:00"),c(e[t]).children(".endTimeSelect").val("17:30"),c(e[t]).children(".titleSelect").val("SCIENCE CENTER OF IOWA CLOSES"),c(e[t]).children(".locationSelect").val("Thank you for visiting. Have a great night!")}}(t)})})}function H(e,t,n){for(var a=0;a<e.length;a++){for(var l=0;l<o.length;l++)c(e[a]).children(".startTimeSelect").append(c("<option>",{value:o[l],text:o[l]})),c(e[a]).children(".endTimeSelect").append(c("<option>",{value:o[l],text:o[l]}));for(l=0;l<t.tables.presentationTitles.length;l++)c(e[a]).children(".titleSelect").append(c("<option>",{value:t.tables.presentationTitles[l].title,text:t.tables.presentationTitles[l].title}));for(l=0;l<t.tables.presentationLocation.length;l++)c(e[a]).children(".locationSelect").append(c("<option>",{value:t.tables.presentationLocation[l].locationName,text:t.tables.presentationLocation[l].locationName}));for(l=0;l<t.tables.presenters.length;l++)c(e[a]).children(".presenterSelect").append(c("<option>",{value:t.tables.presenters[l].Name,text:t.tables.presenters[l].Name}))}return n()}function W(e,t){if(d=c(".fc-day-number").filter(":parents(.fc-past-month)").filter(":parents(.fc-other-month)").filter(":parents(.fc-future-month)"),O(function(a){for(var e=null,t=null,n=null,l=null,r=0;r<=d.length;r++)if(1<=a.length){for(var i=!1,o=0;o<a.length;o++){l=a[o].ScheduledDate,t=c(d[r]).html(),e=B(l,b);var s=a[o].ScheduledDate.substring(8,10);if("0"===s[0]&&(s=s[1]),n=s===t,!e&&n?(u="<span class=\"scheduledEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",i=!0):n&&(u="<span class=\"archivedEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",i=!0),i){c(d[r]).after(u);break}}i||(u="<span class=\"noEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",c(d[r]).after(u))}else u="<span class=\"noEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",c(d[r]).after(u);!function(e){if(h=c(".noEventCircleMarker"),p=c(".archivedEventCircleMarker"),f=c(".scheduledEventCircleMarker"),v=c("#schedulingToolDateSelect"),e)e()}(function(){c(h).click(function(e){var t;(J(e),c("#schedulingToolScreenLocationInput").removeAttr("disabled"),!B(t=c(e.target).parent().attr("data-date"),b)||function(e,t){if(""===e&&""===t)return 0;var n=new Date(e+" 12:00:00"),a=new Date(t+" 12:00:00");return n=n.getTime(),a=a.getTime(),parseInt(a)==parseInt(n)}(b,t)||(c("#presentationEntryContainer").html("<br/><span class='relativelyCentered'> This day is in the past and can not be altered.</span> </br> "),0))?ee(8,function(){G(),c(".modifyPresentationEntry").hide(),c(".archivedPresentationEntry").hide(),R(),q()}):Y()}),c(f).click(function(e){J(e),c("#schedulingToolScreenLocationInput").removeAttr("disabled");var t=c(this).prev().html(),n=new Date;n=n.getMonth()+1,1===t.length&&(t="0"+t),$(a,g+"-"+m+"-"+t,function(e){var t=(e=U(e,D)).length;if(t){if(1<t){var n=c(".selectedDay").attr("data-date"),a=n.substr(5,2),l=n.substr(8,2);_(a,g,l,D)}ee(t,function(){ae(t),F(e),c(".deletePresentationEntry").hide(),c(".archivedPresentationEntry").hide(),c(".modifyPresentationEntry").show(),R(),q()})}else ee(8,function(){G(),c(".modifyPresentationEntry").hide(),c(".archivedPresentationEntry").hide(),R(),q()})})}),c(p).click(function(e){J(e),c("#schedulingToolScreenLocationInput").removeAttr("disabled");var t=c(this).prev().html(),n=new Date;n=n.getMonth()+1,1===t.length&&(t="0"+t),$(a,g+"-"+m+"-"+t,function(e){var t=(e=U(e,D)).length;if(1<t){var n=c(".selectedDay").attr("data-date"),a=n.substr(5,2),l=n.substr(8,2);_(a,g,l,D)}ee(t,function(){ae(t),F(e),c(".deletePresentationEntry").hide(),c(".modifyPresentationEntry").hide(),c(".archivedPresentationEntry").show(),c(y).append('<span class="relativelyCentered">This day is in the past and can not be altered.</span>'),Y(),q()})})})})}),t)return t()}function U(e,t){for(var n=[],a=0;a<e.length;a++)e[a].ScreenLocation===t&&(0==n.length?n[0]=e[a]:n.push(e[a]));return n}function _(e,t,n,a){var l,r;parseInt(e)<=9&&1<e.length&&(e=e.substr(1,1)),r="../_serverSide/readDailySchedule.php?day="+(l={day:n,month:e,year:t,screen:a}).day+"&month="+l.month+"&year="+l.year+"&screen='"+l.screen+"'&previewMode=true",c(k).html("Preview This Schedule"),c(k).unbind("click"),c(k).click(function(){s.open(r,"_blank")})}function J(e){var t;Q(),t=e.target,c(".selectedDay").removeClass("selectedDay"),c(t).parent().addClass("selectedDay"),function(e){var t,n,a,l;e.preventDefault(),e.stopImmediatePropagation(),c(e.target).hasClass("eventMarkerLabel")&&(e.target=c(e.target).parent());t=c(e.target).parent().attr("data-date"),n=c(e.target).siblings().html(),a=function(e,t){e+=" 12:00:00";var n=new Date(e),a=n.getDay(),l=n.getMonth(),r=n.getFullYear();return n=function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(a)+" "+te(l)+"/"+t+"/"+r}(t,n),l="<option selected >"+a+"</option>",c(v).html(l)}(e)}function Q(){c(y).html(""),c(T).html(""),c(k).html(""),ae(0)}function Y(){c("#toolBar").addClass("hidden")}function R(){c("#toolBar").removeClass("hidden")}function $(e,t,n){S=[];for(var a=0;a<e.length;a++)e[a].ScheduledDate===t&&(S.length?S.push(e[a]):S[0]=e[a]);return n(S)}function q(){c(".deletePresentationEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t,n,a=c(this).parent().hasClass("scheduled"),l=c(e.target).siblings('button[class^="submitEventLineButton"]').attr("index");if(a){var r=s.confirm("You sure you want to delete this entry? "),i=c(".selectedDay").attr("data-date"),o=null;if(r)t=function(e){o=e.message,X(),setTimeout(function(){W(0,function(){c("td[data-date='"+i+"']").addClass("selectedDay"),setTimeout(function(){c(".selectedDay").children("span").trigger("click"),c(T).html(o)},100)})},100)},n={presentation:{rowName:"Index",rowValue:l},type:3},n=JSON.stringify(n),c.ajax({method:"POST",url:"../_serverSide/createDailyPresentations.php",data:n,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)});else Z(c(this).siblings("select"),c(this).siblings("button")),c(this).hide()}else c(this).parent().remove()}),c(".modifyPresentationEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=c(e.target).parent().children();c(e.target).parent().children(".deletePresentationEntry").show(),c(e.target).hide(),c(t).removeAttr("disabled")}),c(".addEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),c("#addEntryButton").trigger("click")}),c("#addEntryButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation();c(this).parent().hasClass("scheduled");!function(){var e,t,n,a=null;a=void 0===(a=c("#presentationEntryContainer div:last-child").attr("class"))||null===a?0:(a=a.replace("presentationEntry",""),parseInt(a));n="presentationEntry"+(a+=1),e="<button class='submitEventLineButton"+a+"' >Submit</button>",y.append("<div class='"+n+"'>"+r+e+"</div>"),t=c("."+n),j(function(e){H(t,e,function(){q(),c(t).children(".modifyPresentationEntry").hide(),c(t).children(".archivedPresentationEntry").hide()})})}()}),c(".editSelections").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),c("#editSelectionsButton").trigger("click")}),c("#editSelectionsButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),Y(),Q(),c("#schedulingToolScreenLocationInput").attr("disabled","disabled"),c(".selectedDay").removeClass("selectedDay"),c(y).html(""),c(y).html("<fieldset id='scheduledPresentationsFieldSet'><div class='schedulingToolHeaderItem'><label id='editSelectsToolSelectTableLabel' for='editSelectsToolSelectTable'>Select Which Table To Edit</label><select class='schedulingToolSelect' id='editSelectsToolSelectTable'><option value='title'>Title</option><option value='presenterName'>Presenter</option><option value='location'>Location</option> </select></div> <div class='schedulingToolHeaderItem' id='updateTableValues'><label id='editSelectsToolSelectTableValueLabel' for='editSelectsToolSelectTableValue'>Select Which Value To Edit</label><select class='schedulingToolSelect' id='editSelectsToolSelectTableValue'></select><textarea id='editSelectsToolTableValueTextarea' maxlength=\"255\"></textarea><button id=\"submitUpdateTableValue\" disabled=\"disabled\">Update</button><button id=\"submitDeleteTableValue\" disabled=\"disabled\">Delete</button></div><div class='schedulingToolHeaderItem' id='createNewTableValue'><label id='editSelectsToolCreateNewValueLabel' for='editSelectsToolCreateNewValueTextarea'>Add A New Value</label><textarea id='editSelectsToolCreateNewValueTextarea' maxlength=\"255\"></textarea>"+'<button id="submitCreateTableValue" disabled="disabled">Create</button></div> </fieldset>'),C=c("#editSelectsToolSelectTable"),w=c("#editSelectsToolSelectTableValue"),P=c("#editSelectsToolTableValueTextarea"),x=c("#editSelectsToolCreateNewValueTextarea"),N=c("#submitCreateTableValue"),I=c("#submitDeleteTableValue"),L=c("#submitUpdateTableValue"),setTimeout(function(){C.trigger("change")},150),c(C).on("change",function(){z(function(e){K(e),A()})}),c(w).on("change",function(){A()}),c(x).on("focus",function(){c(N).removeAttr("disabled")}),c(N).click(function(e){if(e.stopImmediatePropagation(),e.preventDefault(),c(e.target).attr("disabled","disabled"),!(c(x).val().length<=1)){var t=M(V(),1),n=null;ne(t,function(e){c(x).val(""),c(T).html(e.message),n=e.index,c(C).trigger("change"),c(w).val(n),c(w).trigger("change")})}}),c(L).click(function(e){e.stopImmediatePropagation(),e.preventDefault(),c(e.target).attr("disabled","disabled"),c(I).attr("disabled","disabled"),ne(M(V(),2),function(e){c(T).html(e.message),c(C).trigger("change"),setTimeout(function(){c(w).val(e.index),c(w).trigger("change")},100)})}),c(I).click(function(e){e.stopImmediatePropagation(),e.preventDefault(),c(e.target).attr("disabled","disabled"),c(L).attr("disabled","disabled");var t=M(V(),3);s.confirm("Are you sure you want to delete this value?")&&ne(t,function(e){c(T).html(e.message),c(C).trigger("change")})}),z(function(e){K(e)})}),c('button[class^="submitEventLineButton"]').click(function(e){e.preventDefault(),e.stopImmediatePropagation(),function(i){var o=c(i.target).siblings("select"),e=[],t=[],s=c(".selectedDay").attr("data-date"),n=c(i.target).attr("index");c(i.target).parent().addClass("scheduled");for(var a=0;a<o.length;a++){var l=c(o[a]).find("option:first").html();t.push({rowName:l,rowValue:c(o[a]).val()})}if(t.push({rowName:"ScreenLocation",rowValue:D}),t.push({rowName:"ScheduledDate",rowValue:s}),!function(e){for(var t=0;t<e.length;t++)if(e[t].rowName===e[t].rowValue){if("Presenter Name"===e[t].rowName)continue;return!1}return!0}(t))return alert("The only non required Field is Presenter Name. Please update your selection");e=c(i.target).attr("index")?(t.push({rowName:"Index",rowValue:n}),{presentation:t,type:2}):{presentation:t,type:1};!function(e,t){e=JSON.stringify(e);c.ajax({method:"POST",url:"../_serverSide/createDailyPresentations.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)})}(e,function(r){X(),setTimeout(function(){W();var e=c(y).children(".scheduled"),t=s.substr(5,2),n=s.substr(8,2),a=s.substr(0,4),l=c(E).val();parseInt(t)<=9&&(t=t.substr(1,1)),1<e.length&&_(t,a,n,l),ae(e.length),c("td[data-date='"+s+"']").addClass("selectedDay"),c(T).html(r.message),Z(o,i.target),c(i.target).attr("index",r.Index)},100)})}(e)})}function z(t){j(function(e){return t(e)})}function K(e){var t=c(C).val(),n=null;switch(c(w).html(""),t){case"title":n=e.tables.presentationTitles;for(var a=0;a<n.length;a++)c(w).append(c("<option>",{value:n[a].index,text:n[a].title}));break;case"presenterName":n=e.tables.presenters;for(a=0;a<n.length;a++)c(w).append(c("<option>",{value:n[a].index,text:n[a].Name}));break;case"location":n=e.tables.presentationLocation;for(a=0;a<n.length;a++)c(w).append(c("<option>",{value:n[a].index,text:n[a].locationName}))}}function X(){c(".fc-next-button").trigger("click"),c(".fc-prev-button").trigger("click")}function Z(e,t){c(e).attr("disabled","disabled"),c(t).attr("disabled","disabled"),c(t).siblings(".deletePresentationEntry").hide(),c(t).siblings(".modifyPresentationEntry").show()}function ee(e,t){for(var n=0;n<e;n++){var a="<button class='submitEventLineButton"+n+"' >Submit</button>";y.append("<div class='presentationEntry"+n+"'>"+r+a+"</div>")}return t()}function te(e){return e+1}function ne(e,t){e=JSON.stringify(e);c.ajax({method:"POST",url:"../_serverSide/createPresentationTableValues.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)})}function ae(e){c(i).html(e)}c(document).ready(function(){var e;o=["06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"],e='<select  class="schedulingToolSelect left startTimeSelect" ><option>Start Time</option></select>',e+='<select  class="schedulingToolSelect left endTimeSelect" ><option >End Time</option></select>',e+='<select  class="schedulingToolSelect left titleSelect" ><option >Title</option></select>',e+='<select  class="schedulingToolSelect left locationSelect"><option>Location</option></select>',r="<span class='archivedPresentationEntry left'><span class='controlLabel'></span></span><span class='deletePresentationEntry left'><span class='controlLabel'></span></span><span class='modifyPresentationEntry left'><span class='controlLabel'></span></span>"+(e+='<select  class="schedulingToolSelect left presenterSelect"><option>Presenter Name</option></select>'),b=new Date,b.getDate().toString(),b=b.getFullYear()+"-"+te(b.getMonth())+"-"+b.getDate(),t=document.getElementById("calendar"),n=new FullCalendar.Calendar(t,{plugins:["dayGrid"],showNonCurrentDates:!1}),t&&(n.render(),E=c("#schedulingToolScreenLocationInput"),D=c(E).val(),c(E).on("change",function(){D=c(E).val(),c(".selectedDay").children(".relativelyCentered").trigger("click")}),k=c("#schedulingPreviewLink"),y=c("#presentationEntryContainer"),i=c("#presentationNumberSpan"),T=c("#headerMessageContainer"),W(),a=document.getElementsByClassName("fc-button"),c(a).click(function(e){W(e)}))})}(window,jQuery=window.jQuery||{}),function(d,b){var t=null,n=null,a=null,l=null,r=null,i=null,y=null,o=null,s=null,S=null,T=null,E=0,D=null,c=null,u=null;function h(e,t){t=t||d.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function p(e,t,n,a){var l="_serverSide/readDailySchedule.php?day="+e+"&month="+t+"&year="+n+"&screen="+a;d.open(l,"_blank")}function f(){var e=new Date;30!==(e=e.getMinutes())&&0!==e&&45!==e&&15!==e||d.location.reload()}function k(e){var t=e.valueOf();return t<10?"0"+t.toString():t}function v(){for(var e,t,n,a=(e=new Date,t=e.getHours(),n=k(e.getMinutes()),t+":"+n),l=null,r=null,i=null,o=null,s=null,c=null,d=0,u=!1,h=0;h<y.length;h++){l=b(y[h]).children(".entryGroupStartTime").children(".presentationEntry").html(),r=b(y[h]).children(".entryGroupEndTime").children(".presentationEntry").html(),s=b(y[h]).children(".entryGroupTitle").children(".presentationEntry").html(),c=b(y[h]).children(".entryGroupLocation").children(".presentationEntry").html(),i=C(l),i+=":00",o=C(r),o+=":00";var p=new Date,f=p.getFullYear()+"-"+(parseInt(p.getMonth())+1)+"-"+p.getDate(),v=Date.parse(f+" "+i),g=Date.parse(f+" "+o),m=Date.parse(f+" "+a);if(v<=m&&m<g&&!b(y[h]).hasClass("hidden")){b(S).children(".entryGroupTitle").children(".presentationEntry").html(s),b(S).children(".entryGroupLocation").children(".presentationEntry").html(c),b(S).children(".entryGroupEndTime").children(".presentationEntry").html(r),b(y[h]).addClass("hidden"),--E,u=!0,d=h;break}if(v<m&&g<m){if(b(y[h]).hasClass("hidden"))continue;b(y[h]).addClass("hidden"),--E}}u||(d=y.length-E-1),function(e){if(e===D)return;var t=b(y[e+1]).children(".entryGroupStartTime").children(".presentationEntry").html(),n=b(y[e+1]).children(".entryGroupTitle").children(".presentationEntry").html(),a=b(y[e+1]).children(".entryGroupLocation").children(".presentationEntry").html();b(T).children(".entryGroupTitle").children(".presentationEntry").html(n),b(T).children(".entryGroupLocation").children(".presentationEntry").html(a),b(T).children(".entryGroupStartTime").children(".presentationEntry").html(t),D=e}(d)}function C(e){var t=e.replace(/ /g,""),n=e.replace(/ /g,""),a=0,l=0;return n=n.substring(0,n.length-2),"pm"===(t=t.substring(t.length-2,t.length))&&(a=n.substring(0,n.indexOf(":")),l=n.substring(n.indexOf(":"),n.length),"12"!==a&&(a=parseInt(a)+12),n=a+l),n}function g(){var e=b(o).offset().top,t=0,n=0;if(null===y&&void 0===y||1===E)f(),b(y[y.length-1]).hasClass("hidden")||(b(y[y.length-1]).addClass("hidden"),b("#comingAttractionsContainer").addClass("hidden"),b("#comingAttractionsHeader").addClass("hidden"));else if(0===E)return b("#comingAttractionsContainer").addClass("hidden"),void b("#comingAttractionsHeader").addClass("hidden");(n=.018*(c?Date.now()-c:1))<.4&&(n=.4),s-=n;for(var a=0;a<y.length;a++)b(y[a]).hasClass("hidden")||(t=400+100*a,b(y[y.length-1]).offset().top+80<e?(b(y[a]).css("top",t),f(),s=E/2<=a&&3<=E?0===a?220:220+10*a:1===E?0:220+10*a):b(y[a]).css("top",s));c=Date.now()}b(document).ready(function(){var e;e=function(){b(t).click(function(){p(0,0,0,'"Box Office"')}),b(n).click(function(){p(0,0,0,'"Founders Hall"')}),b(a).click(function(){p(0,0,0,'"JDAT"')}),b(l).click(function(){p(0,0,0,'"Star Theater"')}),b(r).click(function(){d.open("tools/","_blank")}),y.length&&(null!=i&&setInterval(function(){b(i).html("<h2>"+function(){var e=new Date,t=null,n=function(e){var t=e.getHours().valueOf();return 12<t?t-12:0==t?12:t}(e),a=k(e.getMinutes()),l=k(e.getSeconds()),r=e.getMonth()+1,i=null;i=u?r+"/"+e.getDate()+"/"+e.getFullYear()+" "+n+":"+a+":"+l:+n+":"+a;11<e.getHours().valueOf()?i+="pm":i+="am";if(t=function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(t=e.getDay()),u){var o=h("day",d.location),s=h("month",d.location),c=h("year",d.location);return" Preview Mode : "+t+" "+s+"/"+o+"/"+c+" 12:00:00am"}return" "+i}()+"</h2>")},100),s=300,setInterval(g,33),u||(v(),setInterval(v,1e3)))},t=b("#pageLinkBoxOffice"),n=b("#pageLinkFoundersHall"),a=b("#pageLinkJDAT"),l=b("#pageLinkStar"),r=b("#pageLinkTools"),i=b("#scheduleCurrentTime"),y=b(".scheduleCalendarEntry"),E=y.length,o=b("#comingAttractionsScrollArea"),S=b("#currentPresentation"),T=b("#nextPresentation"),u=!!h("previewMode",d.location),e()})}(window,jQuery=window.jQuery||{});