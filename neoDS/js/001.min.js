/*!  2020-01-27 */

jQuery.expr[":"].parents=function(e,t,n){return jQuery(e).parents(n[3]).length<1},function(s,d){var u=null,t=null,n=null,p=null,a=null,h=null,v=null,f=null,m=null,l=null,y=null,g=null,S=null,r=null,b=null,i=null,o=[],c=[],T=null;function E(t){var n,e;l=d("span").filter(function(){return"1"===d(this).text()}),l=d(l).parent().attr("data-date"),y=l.substring(0,4),g=l.substring(5,7),n=function(e){return t(e)},e={month:g,year:y},e=JSON.stringify(e),void d.ajax({method:"POST",url:"../_serverSide/readMonthlySchedule.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return n(e)})}function C(t){var n,e;n=function(e){return t(e)},e={t:"t"},e=JSON.stringify(e),void d.ajax({method:"POST",url:"../_serverSide/readPresentationTables.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return n(e)})}function L(e,t){if(""===e&&""===t)return!1;var n=new Date(e+" 12:00:00"),a=new Date(t+" 12:00:00");return n=n.getTime(),a=a.getTime(),parseInt(a)>parseInt(n)}function k(n){C(function(e){var t=d('div [class^="presentationEntry"]');D(t,e,function(){!function(e,t){for(var n=0;n<e.length;n++){var a=".submitEventLineButton"+n;d(e[n]).children(".startTimeSelect").val(t[n].StartTime).attr("disabled","disabled"),d(e[n]).children(".endTimeSelect").val(t[n].EndTime).attr("disabled","disabled"),d(e[n]).children(".titleSelect").val(t[n].Title).attr("disabled","disabled"),d(e[n]).children(".locationSelect").val(t[n].Location).attr("disabled","disabled"),d(e[n]).children(".deploymentLocationSelect").val(t[n].ScreenLocation).attr("disabled","disabled"),d(e[n]).children(".presenterSelect").val(t[n].PresenterName).attr("disabled","disabled"),d(e[n]).children(a).attr("disabled","disabled").attr("Index",t[n].Index),d(e[n]).addClass("scheduled")}}(t,n)})})}function P(){C(function(e){var t=d('div [class^="presentationEntry"]');D(t,e,function(){!function(e){for(var t=0;t<e.length;t++)switch(t){case 0:d(e[t]).children(".startTimeSelect").val("9:30"),d(e[t]).children(".endTimeSelect").val("10:00"),d(e[t]).children(".titleSelect").val("Storytime Under the Stars"),d(e[t]).children(".locationSelect").val("Why the Sky?, Upper Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 1:d(e[t]).children(".startTimeSelect").val("10:30"),d(e[t]).children(".endTimeSelect").val("11:00"),d(e[t]).children(".titleSelect").val("Meet Stuffee"),d(e[t]).children(".locationSelect").val("John Deere Adventure Theater, Main Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 2:d(e[t]).children(".startTimeSelect").val("12:00"),d(e[t]).children(".endTimeSelect").val("13:00"),d(e[t]).children(".titleSelect").val("WHO-HD Live Weather Forecast"),d(e[t]).children(".locationSelect").val("What on Earth?, Upper Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 3:d(e[t]).children(".startTimeSelect").val("13:30"),d(e[t]).children(".endTimeSelect").val("14:00"),d(e[t]).children(".titleSelect").val("Cold Blooded Critters"),d(e[t]).children(".locationSelect").val("What on Earth?, Upper Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 4:d(e[t]).children(".startTimeSelect").val("14:00"),d(e[t]).children(".endTimeSelect").val("14:30"),d(e[t]).children(".titleSelect").val("Snapping Turtle Feeding"),d(e[t]).children(".locationSelect").val("What on Earth?, Upper Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 5:d(e[t]).children(".startTimeSelect").val("14:30"),d(e[t]).children(".endTimeSelect").val("15:00"),d(e[t]).children(".titleSelect").val("Dawn of the Space Age"),d(e[t]).children(".locationSelect").val("Star Theater, Why the Sky?, Upper Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 6:d(e[t]).children(".startTimeSelect").val("15:30"),d(e[t]).children(".endTimeSelect").val("16:00"),d(e[t]).children(".titleSelect").val("Iowa Skies Tonight"),d(e[t]).children(".locationSelect").val("Star Theater, Why the Sky?, Upper Level"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 7:d(e[t]).children(".startTimeSelect").val("17:00"),d(e[t]).children(".endTimeSelect").val("17:30"),d(e[t]).children(".titleSelect").val("SCIENCE CENTER OF IOWA CLOSES"),d(e[t]).children(".locationSelect").val("Thank you for visiting. Have a great night!"),d(e[t]).children(".deploymentLocationSelect").val("Founders Hall")}}(t)})})}function D(e,t,n){for(var a=0;a<e.length;a++){for(var l=0;l<o.length;l++)d(e[a]).children(".startTimeSelect").append(d("<option>",{value:o[l],text:o[l]})),d(e[a]).children(".endTimeSelect").append(d("<option>",{value:o[l],text:o[l]}));for(l=0;l<t.tables.presentationTitles.length;l++)d(e[a]).children(".titleSelect").append(d("<option>",{value:t.tables.presentationTitles[l].title,text:t.tables.presentationTitles[l].title}));for(l=0;l<t.tables.presentationLocation.length;l++)d(e[a]).children(".locationSelect").append(d("<option>",{value:t.tables.presentationLocation[l].locationName,text:t.tables.presentationLocation[l].locationName}));for(l=0;l<t.tables.presenters.length;l++)d(e[a]).children(".presenterSelect").append(d("<option>",{value:t.tables.presenters[l].Name,text:t.tables.presenters[l].Name}));for(l=0;l<t.tables.deploymentLocations.length;l++)d(e[a]).children(".deploymentLocationSelect").append(d("<option>",{value:t.tables.deploymentLocations[l].deploymentLocation,text:t.tables.deploymentLocations[l].deploymentLocation}))}return n()}function w(e,t){if(u=d(".fc-day-number").filter(":parents(.fc-past-month)").filter(":parents(.fc-other-month)").filter(":parents(.fc-future-month)"),E(function(t){for(var n=null,e=null,a=null,l=null,r=null,i=0;i<=u.length;i++)if(1<=t.length){for(var o=!1,s=0;s<t.length;s++){r=t[s].ScheduledDate,a=d(u[i]).html(),e=L(r,S);var c=t[s].ScheduledDate.substring(8,10);if("0"===c[0]&&(c=c[1]),l=c===a,!e&&l?(p="<span class=\"scheduledEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",o=!0):l&&(p="<span class=\"archivedEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",o=!0),o){d(u[i]).after(p);break}}o||(p="<span class=\"noEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",d(u[i]).after(p))}else p="<span class=\"noEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",d(u[i]).after(p);!function(e){if(h=d(".noEventCircleMarker"),v=d(".archivedEventCircleMarker"),f=d(".scheduledEventCircleMarker"),m=d("#schedulingToolDateSelect"),e)e()}(function(){d(h).click(function(e){var t;(d(b).html(""),d(T).html(""),N(e.target),A(0),H(e),!L(t=d(e.target).parent().attr("data-date"),S)||function(e,t){if(""===e&&""===t)return 0;var n=new Date(e+" 12:00:00"),a=new Date(t+" 12:00:00");return n=n.getTime(),a=a.getTime(),parseInt(a)==parseInt(n)}(S,t)||(d("#presentationEntryContainer").html("<br/><span class='relativelyCentered'> This day is in the past and can not be altered.</span> </br> "),0))?O(8,function(){P(),d(".modifyPresentationEntry").hide(),d(".archivedPresentationEntry").hide(),M(),B()}):I()}),d(f).click(function(e){d(b).html(""),d(T).html(""),N(e.target),A(0),H(e),n=y+"-"+g+"-"+d(this).prev().html(),x(t,n,function(e){var t=e.length;O(t,function(){A(t),k(e),d(".deletePresentationEntry").hide(),d(".archivedPresentationEntry").hide(),d(".modifyPresentationEntry").show(),M(),B()})})}),d(v).click(function(e){d(b).html(""),d(T).html(""),N(e.target),A(0),H(e),n=y+"-"+g+"-"+d(this).prev().html(),x(t,n,function(e){var t=e.length;O(t,function(){A(t),k(e),d(".deletePresentationEntry").hide(),d(".modifyPresentationEntry").hide(),d(".archivedPresentationEntry").show(),d(b).append('<span class="relativelyCentered">This day is in the past and can not be altered.</span>'),I(),B()})})})})}),t)return t()}function I(){d("#toolBar").addClass("hidden")}function M(){d("#toolBar").removeClass("hidden")}function N(e){d(".selectedDay").removeClass("selectedDay"),d(e).parent().addClass("selectedDay")}function x(e,t,n){c=[];for(var a=0;a<e.length;a++)e[a].ScheduledDate===t&&(c.length?c.push(e[a]):c[0]=e[a]);return n(c)}function B(){d(".deletePresentationEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t,n,a=d(this).parent().hasClass("scheduled"),l=d(e.target).siblings('button[class^="submitEventLineButton"]').attr("index");if(a){var r=s.confirm("You sure you want to delete this entry? "),i=d(".selectedDay").attr("data-date"),o=null;if(r)t=function(e){o=e.message,F(),setTimeout(function(){w(0,function(){d("td[data-date='"+i+"']").addClass("selectedDay"),setTimeout(function(){d(".selectedDay").children("span").trigger("click"),d(T).html(o)},100)})},100)},n={presentation:{rowName:"Index",rowValue:l},type:3},n=JSON.stringify(n),d.ajax({method:"POST",url:"../_serverSide/createDailyPresentations.php",data:n,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)});else j(d(this).siblings("select"),d(this).siblings("button")),d(this).hide()}else d(this).parent().remove()}),d(".modifyPresentationEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=d(e.target).parent().children();d(e.target).parent().children(".deletePresentationEntry").show(),d(e.target).hide(),d(t).removeAttr("disabled")}),d(".addEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),d("#addEntryButton").trigger("click")}),d("#addEntryButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation();d(this).parent().hasClass("scheduled");!function(){var e,t,n,a=null;a=void 0===(a=d("#presentationEntryContainer div:last-child").attr("class"))||null===a?0:(a=a.replace("presentationEntry",""),parseInt(a));n="presentationEntry"+(a+=1),e="<button class='submitEventLineButton"+a+"' >Submit</button>",b.append("<div class='"+n+"'>"+r+e+"</div>"),t=d("."+n),C(function(e){D(t,e,function(){B(),d(t).children(".modifyPresentationEntry").hide(),d(t).children(".archivedPresentationEntry").hide()})})}()}),d(".editSelections").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),d("#editSelectionsButton").trigger("click")}),d("#editSelectionsButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),console.log("edit selections")}),d(".submitAllPresentations").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),d("#submitAllPresentationsButton").trigger("click")}),d("#submitAllPresentationsButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),console.log("submit all presentations")}),d('button[class^="submitEventLineButton"]').click(function(e){e.preventDefault(),e.stopImmediatePropagation(),function(t){var n=d(t.target).siblings("select"),e=[],a=[],l=d(".selectedDay").attr("data-date"),r=d(t.target).attr("index");d(t.target).parent().addClass("scheduled");for(var i=0;i<n.length;i++){var o=d(n[i]).find("option:first").html();a.push({rowName:o,rowValue:d(n[i]).val()})}if(a.push({rowName:"ScheduledDate",rowValue:l}),!function(e){for(var t=0;t<e.length;t++)if(e[t].rowName===e[t].rowValue){if("Presenter Name"===e[t].rowName)continue;return!1}return!0}(a))return alert("The only non required Field is Presenter Name. Please update your selection");e=d(t.target).attr("index")?(a.push({rowName:"Index",rowValue:r}),{presentation:a,type:2}):{presentation:a,type:1};!function(e,t){e=JSON.stringify(e);d.ajax({method:"POST",url:"../_serverSide/createDailyPresentations.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)})}(e,function(e){F(),setTimeout(function(){w(),d("td[data-date='"+l+"']").addClass("selectedDay"),d(T).html(e.message),j(n,t.target),d(t.target).attr("index",e.Index)},100)})}(e)})}function F(){d(".fc-next-button").trigger("click"),d(".fc-prev-button").trigger("click")}function j(e,t){d(e).attr("disabled","disabled"),d(t).attr("disabled","disabled"),d(t).siblings(".deletePresentationEntry").hide(),d(t).siblings(".modifyPresentationEntry").show()}function O(e,t){for(var n=0;n<e;n++){var a="<button class='submitEventLineButton"+n+"' >Submit</button>";b.append("<div class='presentationEntry"+n+"'>"+r+a+"</div>")}return t()}function H(e){var t;e.preventDefault(),e.stopImmediatePropagation(),d(e.target).hasClass("eventMarkerLabel")&&(e.target=d(e.target).parent()),t="<option selected >"+function(e,t){e+=" 12:00:00";var n=new Date(e),a=n.getDay(),l=n.getMonth(),r=n.getFullYear();return n=function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(a)+" "+W(l)+"/"+t+"/"+r}(d(e.target).parent().attr("data-date"),d(e.target).siblings().html())+"</option>",d(m).html(t)}function W(e){return e+1}function A(e){d(i).html(e)}d(document).ready(function(){var e;if(o=["6:00","6:15","6:30","6:45","7:00","7:15","7:30","7:45","8:00","8:15","8:30","8:45","9:00","9:15","9:30","9:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"],e='<select  class="schedulingToolSelect left startTimeSelect" ><option>Start Time</option></select>',e+='<select  class="schedulingToolSelect left endTimeSelect" ><option >End Time</option></select>',e+='<select  class="schedulingToolSelect left titleSelect" ><option >Title</option></select>',e+='<select  class="schedulingToolSelect left locationSelect"><option>Location</option></select>',e+='<select  class="schedulingToolSelect left presenterSelect"><option>Presenter Name</option></select>',r="<span class='archivedPresentationEntry left'><span class='controlLabel'></span></span><span class='deletePresentationEntry left'><span class='controlLabel'></span></span><span class='modifyPresentationEntry left'><span class='controlLabel'></span></span>"+(e+='<select  class="schedulingToolSelect left deploymentLocationSelect"><option>Screen Location</option></select>'),S=new Date,S.getDate().toString(),S=S.getFullYear()+"-"+W(S.getMonth())+"-"+S.getDate(),t=document.getElementById("calendar"),n=new FullCalendar.Calendar(t,{plugins:["dayGrid"],showNonCurrentDates:!1}),!t)return console.log("Error: Could not create Calendar : schedulingCalendar.js");n.render(),b=d("#presentationEntryContainer"),i=d("#presentationNumberSpan"),T=d("#headerMessageContainer"),w(),a=document.getElementsByClassName("fc-button"),d(a).click(function(e){w(e)})})}(window,jQuery=window.jQuery||{});