/*!  2020-02-14 */

jQuery.expr[":"].parents=function(e,t,n){return jQuery(e).parents(n[3]).length<1},function(c,s){var d=null,t=null,n=null,u=null,a=null,h=null,p=null,f=null,v=null,r=null,m=null,g=null,y=null,l=null,S=null,i=null,o=[],b=[],T=null,E=null,k=null,D=null;function C(t){var n,e;r=s("span").filter(function(){return"1"===s(this).text()}),r=s(r).parent().attr("data-date"),m=r.substring(0,4),g=r.substring(5,7),n=function(e){return t(e)},e={month:g,year:m},e=JSON.stringify(e),void s.ajax({method:"POST",url:"../_serverSide/readMonthlySchedule.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return n(e)})}function w(t){var n,e;n=function(e){return t(e)},e={t:"t"},e=JSON.stringify(e),void s.ajax({method:"POST",url:"../_serverSide/readPresentationTables.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return n(e)})}function L(e,t){if(""===e&&""===t)return!1;var n=new Date(e+" 12:00:00"),a=new Date(t+" 12:00:00");return n=n.getTime(),a=a.getTime(),parseInt(a)>parseInt(n)}function P(n){w(function(e){var t=s('div [class^="presentationEntry"]');M(t,e,function(){!function(e,t){for(var n=0;n<e.length;n++){var a=".submitEventLineButton"+n;s(e[n]).children(".startTimeSelect").val(t[n].StartTime).attr("disabled","disabled"),s(e[n]).children(".endTimeSelect").val(t[n].EndTime).attr("disabled","disabled"),s(e[n]).children(".titleSelect").val(t[n].Title).attr("disabled","disabled"),s(e[n]).children(".locationSelect").val(t[n].Location).attr("disabled","disabled"),s(e[n]).children(".deploymentLocationSelect").val(t[n].ScreenLocation).attr("disabled","disabled"),s(e[n]).children(".presenterSelect").val(t[n].PresenterName).attr("disabled","disabled"),s(e[n]).children(a).attr("disabled","disabled").attr("Index",t[n].Index),s(e[n]).addClass("scheduled")}}(t,n)})})}function I(){w(function(e){var t=s('div [class^="presentationEntry"]');M(t,e,function(){!function(e){for(var t=0;t<e.length;t++)switch(t){case 0:s(e[t]).children(".startTimeSelect").val("09:30"),s(e[t]).children(".endTimeSelect").val("10:00"),s(e[t]).children(".titleSelect").val("Storytime Under the Stars"),s(e[t]).children(".locationSelect").val("Why the Sky?, Upper Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 1:s(e[t]).children(".startTimeSelect").val("10:30"),s(e[t]).children(".endTimeSelect").val("11:00"),s(e[t]).children(".titleSelect").val("Meet Stuffee"),s(e[t]).children(".locationSelect").val("John Deere Adventure Theater, Main Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 2:s(e[t]).children(".startTimeSelect").val("12:00"),s(e[t]).children(".endTimeSelect").val("13:00"),s(e[t]).children(".titleSelect").val("WHO-HD Live Weather Forecast"),s(e[t]).children(".locationSelect").val("What on Earth?, Upper Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 3:s(e[t]).children(".startTimeSelect").val("13:30"),s(e[t]).children(".endTimeSelect").val("14:00"),s(e[t]).children(".titleSelect").val("Cold Blooded Critters"),s(e[t]).children(".locationSelect").val("What on Earth?, Upper Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 4:s(e[t]).children(".startTimeSelect").val("14:00"),s(e[t]).children(".endTimeSelect").val("14:30"),s(e[t]).children(".titleSelect").val("Snapping Turtle Feeding"),s(e[t]).children(".locationSelect").val("What on Earth?, Upper Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 5:s(e[t]).children(".startTimeSelect").val("14:30"),s(e[t]).children(".endTimeSelect").val("15:00"),s(e[t]).children(".titleSelect").val("Dawn of the Space Age"),s(e[t]).children(".locationSelect").val("Star Theater, Why the Sky?, Upper Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 6:s(e[t]).children(".startTimeSelect").val("15:30"),s(e[t]).children(".endTimeSelect").val("16:00"),s(e[t]).children(".titleSelect").val("Iowa Skies Tonight"),s(e[t]).children(".locationSelect").val("Star Theater, Why the Sky?, Upper Level"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall");break;case 7:s(e[t]).children(".startTimeSelect").val("17:00"),s(e[t]).children(".endTimeSelect").val("17:30"),s(e[t]).children(".titleSelect").val("SCIENCE CENTER OF IOWA CLOSES"),s(e[t]).children(".locationSelect").val("Thank you for visiting. Have a great night!"),s(e[t]).children(".deploymentLocationSelect").val("Founders Hall")}}(t)})})}function M(e,t,n){for(var a=0;a<e.length;a++){for(var r=0;r<o.length;r++)s(e[a]).children(".startTimeSelect").append(s("<option>",{value:o[r],text:o[r]})),s(e[a]).children(".endTimeSelect").append(s("<option>",{value:o[r],text:o[r]}));for(r=0;r<t.tables.presentationTitles.length;r++)s(e[a]).children(".titleSelect").append(s("<option>",{value:t.tables.presentationTitles[r].title,text:t.tables.presentationTitles[r].title}));for(r=0;r<t.tables.presentationLocation.length;r++)s(e[a]).children(".locationSelect").append(s("<option>",{value:t.tables.presentationLocation[r].locationName,text:t.tables.presentationLocation[r].locationName}));for(r=0;r<t.tables.presenters.length;r++)s(e[a]).children(".presenterSelect").append(s("<option>",{value:t.tables.presenters[r].Name,text:t.tables.presenters[r].Name}))}return n()}function x(e,t){if(d=s(".fc-day-number").filter(":parents(.fc-past-month)").filter(":parents(.fc-other-month)").filter(":parents(.fc-future-month)"),C(function(r){for(var e=null,t=null,n=null,a=null,l=0;l<=d.length;l++)if(1<=r.length){for(var i=!1,o=0;o<r.length;o++){a=r[o].ScheduledDate,t=s(d[l]).html(),e=L(a,y);var c=r[o].ScheduledDate.substring(8,10);if("0"===c[0]&&(c=c[1]),n=c===t,!e&&n?(u="<span class=\"scheduledEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",i=!0):n&&(u="<span class=\"archivedEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",i=!0),i){s(d[l]).after(u);break}}i||(u="<span class=\"noEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",s(d[l]).after(u))}else u="<span class=\"noEventCircleMarker relativelyCentered topMargin20\"><span class='eventMarkerLabel'>SCI</span></span>",s(d[l]).after(u);!function(e){if(h=s(".noEventCircleMarker"),p=s(".archivedEventCircleMarker"),f=s(".scheduledEventCircleMarker"),v=s("#schedulingToolDateSelect"),e)e()}(function(){s(h).click(function(e){var t;(O(e),!L(t=s(e.target).parent().attr("data-date"),y)||function(e,t){if(""===e&&""===t)return 0;var n=new Date(e+" 12:00:00"),a=new Date(t+" 12:00:00");return n=n.getTime(),a=a.getTime(),parseInt(a)==parseInt(n)}(y,t)||(s("#presentationEntryContainer").html("<br/><span class='relativelyCentered'> This day is in the past and can not be altered.</span> </br> "),0))?_(8,function(){I(),s(".modifyPresentationEntry").hide(),s(".archivedPresentationEntry").hide(),H(),G()}):B()}),s(f).click(function(e){O(e);var n=s(this).prev().html(),a=new Date;a=a.getMonth()+1,1===n.length&&(n="0"+n),j(r,m+"-"+g+"-"+n,function(e){var t=(e=N(e,k)).length;if(!t)return s("#presentationEntryContainer").html("<br/><span class='relativelyCentered'> Nothing Scheduled for this screen and date.</span> </br> ");F(a,m,n,k),_(t,function(){J(t),P(e),s(".deletePresentationEntry").hide(),s(".archivedPresentationEntry").hide(),s(".modifyPresentationEntry").show(),H(),G()})})}),s(p).click(function(e){O(e);var t=s(this).prev().html(),n=new Date;n=n.getMonth()+1,1===t.length&&(t="0"+t),j(r,m+"-"+g+"-"+t,function(e){var t=(e=N(e,k)).length;if(!t)return s("#presentationEntryContainer").html("<br/><span class='relativelyCentered'> Nothing Scheduled for this screen and date.</span> </br> ");F(n,m,preservedDay,k),_(t,function(){J(t),P(e),s(".deletePresentationEntry").hide(),s(".modifyPresentationEntry").hide(),s(".archivedPresentationEntry").show(),s(S).append('<span class="relativelyCentered">This day is in the past and can not be altered.</span>'),B(),G()})})})})}),t)return t()}function N(e,t){for(var n=[],a=0;a<e.length;a++)e[a].ScreenLocation===t&&(0==n.length?n[0]=e[a]:n.push(e[a]));return n}function F(e,t,n,a){var r="../_serverSide/readDailySchedule.php?day="+n+"&month="+e+"&year="+t+"&screen='"+a+"'&previewMode=true";s(D).html("Preview This Schedule"),s(D).click(function(){c.open(r,"_blank")})}function O(e){var t;s(S).html(""),s(T).html(""),s(D).html(""),t=e.target,s(".selectedDay").removeClass("selectedDay"),s(t).parent().addClass("selectedDay"),J(0),function(e){var t,n,a,r;e.preventDefault(),e.stopImmediatePropagation(),s(e.target).hasClass("eventMarkerLabel")&&(e.target=s(e.target).parent());t=s(e.target).parent().attr("data-date"),n=s(e.target).siblings().html(),a=function(e,t){e+=" 12:00:00";var n=new Date(e),a=n.getDay(),r=n.getMonth(),l=n.getFullYear();return n=function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(a)+" "+U(r)+"/"+t+"/"+l}(t,n),r="<option selected >"+a+"</option>",s(v).html(r)}(e)}function B(){s("#toolBar").addClass("hidden")}function H(){s("#toolBar").removeClass("hidden")}function j(e,t,n){b=[];for(var a=0;a<e.length;a++)e[a].ScheduledDate===t&&(b.length?b.push(e[a]):b[0]=e[a]);return n(b)}function G(){s(".deletePresentationEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t,n,a=s(this).parent().hasClass("scheduled"),r=s(e.target).siblings('button[class^="submitEventLineButton"]').attr("index");if(a){var l=c.confirm("You sure you want to delete this entry? "),i=s(".selectedDay").attr("data-date"),o=null;if(l)t=function(e){o=e.message,A(),setTimeout(function(){x(0,function(){s("td[data-date='"+i+"']").addClass("selectedDay"),setTimeout(function(){s(".selectedDay").children("span").trigger("click"),s(T).html(o)},100)})},100)},n={presentation:{rowName:"Index",rowValue:r},type:3},n=JSON.stringify(n),s.ajax({method:"POST",url:"../_serverSide/createDailyPresentations.php",data:n,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)});else W(s(this).siblings("select"),s(this).siblings("button")),s(this).hide()}else s(this).parent().remove()}),s(".modifyPresentationEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=s(e.target).parent().children();s(e.target).parent().children(".deletePresentationEntry").show(),s(e.target).hide(),s(t).removeAttr("disabled")}),s(".addEntry").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),s("#addEntryButton").trigger("click")}),s("#addEntryButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation();s(this).parent().hasClass("scheduled");!function(){var e,t,n,a=null;a=void 0===(a=s("#presentationEntryContainer div:last-child").attr("class"))||null===a?0:(a=a.replace("presentationEntry",""),parseInt(a));n="presentationEntry"+(a+=1),e="<button class='submitEventLineButton"+a+"' >Submit</button>",S.append("<div class='"+n+"'>"+l+e+"</div>"),t=s("."+n),w(function(e){M(t,e,function(){G(),s(t).children(".modifyPresentationEntry").hide(),s(t).children(".archivedPresentationEntry").hide()})})}()}),s(".editSelections").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),s("#editSelectionsButton").trigger("click")}),s("#editSelectionsButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),console.log("edit selections")}),s(".submitAllPresentations").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),s("#submitAllPresentationsButton").trigger("click")}),s("#submitAllPresentationsButton").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),console.log("submit all presentations")}),s('button[class^="submitEventLineButton"]').click(function(e){e.preventDefault(),e.stopImmediatePropagation(),function(t){var n=s(t.target).siblings("select"),e=[],a=[],r=s(".selectedDay").attr("data-date"),l=s(t.target).attr("index");s(t.target).parent().addClass("scheduled");for(var i=0;i<n.length;i++){var o=s(n[i]).find("option:first").html();a.push({rowName:o,rowValue:s(n[i]).val()})}if(a.push({rowName:"ScheduledDate",rowValue:r}),!function(e){for(var t=0;t<e.length;t++)if(e[t].rowName===e[t].rowValue){if("Presenter Name"===e[t].rowName)continue;return!1}return!0}(a))return alert("The only non required Field is Presenter Name. Please update your selection");e=s(t.target).attr("index")?(a.push({rowName:"Index",rowValue:l}),{presentation:a,type:2}):{presentation:a,type:1};!function(e,t){e=JSON.stringify(e);s.ajax({method:"POST",url:"../_serverSide/createDailyPresentations.php",data:e,async:!0,timeout:0,contentType:"application/json; charset=utf-8"}).done(function(e){return t(e)})}(e,function(e){A(),setTimeout(function(){x(),s("td[data-date='"+r+"']").addClass("selectedDay"),s(T).html(e.message),W(n,t.target),s(t.target).attr("index",e.Index)},100)})}(e)})}function A(){s(".fc-next-button").trigger("click"),s(".fc-prev-button").trigger("click")}function W(e,t){s(e).attr("disabled","disabled"),s(t).attr("disabled","disabled"),s(t).siblings(".deletePresentationEntry").hide(),s(t).siblings(".modifyPresentationEntry").show()}function _(e,t){for(var n=0;n<e;n++){var a="<button class='submitEventLineButton"+n+"' >Submit</button>";S.append("<div class='presentationEntry"+n+"'>"+l+a+"</div>")}return t()}function U(e){return e+1}function J(e){s(i).html(e)}s(document).ready(function(){var e;o=["06:00","06:15","06:30","06:45","07:00","07:15","07:30","07:45","08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30","22:45","23:00","23:15","23:30","23:45"],e='<select  class="schedulingToolSelect left startTimeSelect" ><option>Start Time</option></select>',e+='<select  class="schedulingToolSelect left endTimeSelect" ><option >End Time</option></select>',e+='<select  class="schedulingToolSelect left titleSelect" ><option >Title</option></select>',e+='<select  class="schedulingToolSelect left locationSelect"><option>Location</option></select>',l="<span class='archivedPresentationEntry left'><span class='controlLabel'></span></span><span class='deletePresentationEntry left'><span class='controlLabel'></span></span><span class='modifyPresentationEntry left'><span class='controlLabel'></span></span>"+(e+='<select  class="schedulingToolSelect left presenterSelect"><option>Presenter Name</option></select>'),y=new Date,y.getDate().toString(),y=y.getFullYear()+"-"+U(y.getMonth())+"-"+y.getDate(),t=document.getElementById("calendar"),n=new FullCalendar.Calendar(t,{plugins:["dayGrid"],showNonCurrentDates:!1}),t&&(n.render(),E=s("#schedulingToolScreenLocationInput"),k=s(E).val(),s(E).on("change",function(){k=s(E).val(),s(".selectedDay").children(".relativelyCentered").trigger("click")}),D=s("#schedulingPreviewLink"),S=s("#presentationEntryContainer"),i=s("#presentationNumberSpan"),T=s("#headerMessageContainer"),x(),a=document.getElementsByClassName("fc-button"),s(a).click(function(e){x(e)}))})}(window,jQuery=window.jQuery||{}),function(s,y){var t=null,n=null,a=null,r=null,l=null,i=null,S=null,o=null,c=null,b=null,T=null,E=0,k=null,d=null,u=null,h=null;function p(e,t){t=t||s.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function f(e,t,n,a){var r="_serverSide/readDailySchedule.php?day="+e+"&month="+t+"&year="+n+"&screen="+a;s.open(r,"_blank")}function v(){var e=new Date;30!==(e=e.getMinutes())&&0!==e&&45!==e&&15!==e||s.location.reload()}function D(e){var t=e.valueOf();return t<10?"0"+t.toString():t}function m(){for(var e,t,n,a=(e=new Date,t=e.getHours(),n=D(e.getMinutes()),t+":"+n),r=null,l=null,i=null,o=null,c=null,s=null,d=0,u=!1,h=0;h<S.length;h++){r=y(S[h]).children(".entryGroupStartTime").children(".presentationEntry").html(),l=y(S[h]).children(".entryGroupEndTime").children(".presentationEntry").html(),c=y(S[h]).children(".entryGroupTitle").children(".presentationEntry").html(),s=y(S[h]).children(".entryGroupLocation").children(".presentationEntry").html(),i=C(r),i+=":00",o=C(l),o+=":00";var p=new Date,f=p.getFullYear()+"-"+(parseInt(p.getMonth())+1)+"-"+p.getDate(),v=Date.parse(f+" "+i),m=Date.parse(f+" "+o),g=Date.parse(f+" "+a);if(v<=g&&g<=m&&!y(S[h]).hasClass("hidden")){y(b).children(".entryGroupTitle").children(".presentationEntry").html(c),y(b).children(".entryGroupLocation").children(".presentationEntry").html(s),y(b).children(".entryGroupEndTime").children(".presentationEntry").html(l),y(S[h]).addClass("hidden"),--E,u=!0,d=h;break}if(v<g&&m<g){if(y(S[h]).hasClass("hidden"))continue;y(S[h]).addClass("hidden"),--E}}u||(d=S.length-E-1),function(e){if(e===k)return;var t=y(S[e+1]).children(".entryGroupStartTime").children(".presentationEntry").html(),n=y(S[e+1]).children(".entryGroupTitle").children(".presentationEntry").html(),a=y(S[e+1]).children(".entryGroupLocation").children(".presentationEntry").html();y(T).children(".entryGroupTitle").children(".presentationEntry").html(n),y(T).children(".entryGroupLocation").children(".presentationEntry").html(a),y(T).children(".entryGroupStartTime").children(".presentationEntry").html(t),k=e}(d)}function C(e){var t=e.replace(/ /g,""),n=e.replace(/ /g,""),a=0,r=0;return n=n.substring(0,n.length-2),"pm"===(t=t.substring(t.length-2,t.length))&&(a=n.substring(0,n.indexOf(":")),r=n.substring(n.indexOf(":"),n.length),"12"!==a&&(a=parseInt(a)+12),n=a+r),n}function g(){var e=y(o).offset().top,t=0;if(null===S&&void 0===S||1===E)y(S[S.length-1]).hasClass("hidden")||y(S[S.length-1]).addClass("hidden");else{d=u?Date.now()-u:1,c-=.018*d;for(var n=0;n<S.length;n++)y(S[n]).hasClass("hidden")||(t=400+100*n,y(S[S.length-1]).offset().top+150<e?(y(S[n]).css("top",t),E/2<=n&&3<=E?c=0===n?300:300+10*n:E<3&&1<E?c=300:1===E&&(c=0)):y(S[n]).css("top",c));u=Date.now()}}y(document).ready(function(){var e;e=function(){y(t).click(function(){f(0,0,0,'"Box Office"')}),y(n).click(function(){f(0,0,0,'"Founders Hall"')}),y(a).click(function(){f(0,0,0,'"JDAT"')}),y(r).click(function(){f(0,0,0,'"Star Theater"')}),y(l).click(function(){s.open("tools/","_blank")}),S.length&&(null!=i&&setInterval(function(){y(i).html("<h2>"+function(){var e=new Date,t=null,n=function(e){var t=e.getHours().valueOf();return 12<t?t-12:0==t?12:t}(e),a=D(e.getMinutes()),r=D(e.getSeconds()),l=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+n+":"+a+":"+r;11<e.getHours().valueOf()?l+="pm":l+="am";if(t=function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}}(t=e.getDay()),h){var i=p("day",s.location),o=p("month",s.location),c=p("year",s.location);return" Preview Mode : "+o+"/"+i+"/"+c+" 12:00:00am"}return t+" "+l}()+"</h2>")},100),c=300,setInterval(g,33),h||(m(),setInterval(m,1e3),setInterval(v,42e3)))},t=y("#pageLinkBoxOffice"),n=y("#pageLinkFoundersHall"),a=y("#pageLinkJDAT"),r=y("#pageLinkStar"),l=y("#pageLinkTools"),i=y("#scheduleCurrentTime"),S=y(".scheduleCalendarEntry"),E=S.length,o=y("#comingAttractionsScrollArea"),b=y("#currentPresentation"),T=y("#nextPresentation"),h=!!p("previewMode",s.location),e()})}(window,jQuery=window.jQuery||{});